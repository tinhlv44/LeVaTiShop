@using System.Text.RegularExpressions;
@model LeVaTiShop.Models.Product
@{
    ViewBag.Title = Model.nameProduct;
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    decimal disPrice = 0;
    if (Model.discountedPrice.HasValue)
    {
        disPrice = Model.discountedPrice.Value;
    }
    string namePro = Model.nameProduct;/*string.Join(" ", Model.nameProduct.ToLower().Split(' '));*/

    LeVaTiShop.Models.function f = new LeVaTiShop.Models.function();
    List<String> sColor;
    List<String> sImage;
    f.analysisImage(Model.image, out sColor, out sImage);
    string input = Model.specifications;

    List<string> lfield;
    List<string> lvalue;
    f.analysisSpecifications(input, out lfield, out lvalue);

    int ram = lfield.FindIndex(item => item == "RAM");
    int capacity = lfield.FindIndex(item => item == "Bộ nhớ thẻ nhớ");
}




<div class="home_container">
    <div class="cps">
        <ul class="cps_list">
            <li class="cps_item"><a href="@Url.Action("Index", "Home")">Trang chủ</a></li>
            <li class="cps_ic">❯</li>
            <li class="cps_item">@Model.Brand.nameBrand</li>
            <li class="cps_ic">❯</li>
            <li class="cps_item">@Model.nameProduct</li>
        </ul>
    </div>
    <div class="proinfor">
        <h2 class="proinfor_heading">@Model.nameProduct</h2>
        <div class="proinfor_box">
            <div class="proinfor_img">
                <img src="~/set/img/product/@namePro/@sImage[0]" alt="" class="proinfor_cimg">
            </div>
            <div class="proinfor_describe">
                <div class="proi_coin">
                    @if (Model.isDiscounted)
                    {
                        <div class="coinpre">@disPrice.ToString("N0") VNĐ</div>
                        <div class="coinpast">@Model.price.ToString("N0") VNĐ</div>

                    }
                    else
                    {
                        <div class="coinpre">@Model.price.ToString("N0") VNĐ</div>
                    }
                </div>
                <div class="proi_ct">
                    <ul class="proi_list">
                        <li class="proi_item">
                            <h4 class="proi_name">Lựa chọn phiên bản mong muốn:</h4>
                        </li>
                        <li class="proi_item">
                            <p class="proi_name"><strong>Màu: </strong></p>
                            @for (int i = 0; i < sImage.Count; i++)
                            {
                                <div class="proi_box">
                                    <div class="proi_boxcolor" style="background-color:@sColor[i]" onclick="selection('color', @i, '@namePro/@sImage[i]')"></div>
                                </div>
                            }
                        </li>
                        @*<li class="proi_item">
                                <p class="proi_name">Bộ nhớ</p>
                                <div class="proi_box">
                                    <div class="proi_boxctram" onclick="selection('ctram', 0)">128G</div>
                                </div>
                                <div class="proi_box">
                                    <div class="proi_boxctram" onclick="selection('ctram', 1)">256G</div>
                                </div>
                                <div class="proi_box">
                                    <div class="proi_boxctram" onclick="selection('ctram', 2)">512G</div>
                                </div>
                                <div class="proi_box">
                                    <div class="proi_boxctram" onclick="selection('ctram', 3)">1TB</div>
                                </div>
                            </li>
                            <li class="proi_item">
                                <p class="proi_name">Nơi sản xuất:</p>
                                <div class="proi_box">
                                    <div class="proi_boxctor" onclick="selection('ctor', 0)">Việt Nam</div>
                                </div>
                                <div class="proi_box">
                                    <div class="proi_boxctor" onclick="selection('ctor', 1)">Mỹ</div>
                                </div>
                            </li>*@
                        @if (ram != -1)
                        {
                            <li class="proi_item">
                                <p class="proi_name"><strong>Bộ nhớ: </strong>@lvalue[ram]</p>
                                @*<div class="proi_box">
                                        <div class="proi_boxcttime" onclick="selection('cttime', 0)">BH 6 Tháng</div>
                                    </div>
                                    <div class="proi_box">
                                        <div class="proi_boxcttime" onclick="selection('cttime', 1)">BH 12 Tháng</div>
                                    </div>*@
                            </li>
                        }
                        @if (capacity != -1)
                        {
                            <li class="proi_item">
                                <p class="proi_name"><strong>Bộ nhớ thẻ nhớ: </strong>@lvalue[capacity]</p>
                                @*<div class="proi_box">
                                        <div class="proi_boxcttime" onclick="selection('cttime', 0)">BH 6 Tháng</div>
                                    </div>
                                    <div class="proi_box">
                                        <div class="proi_boxcttime" onclick="selection('cttime', 1)">BH 12 Tháng</div>
                                    </div>*@
                            </li>
                        }
                        <li class="proi_item">
                            <p class="proi_name"><strong>Bảo hành: </strong>12 tháng</p>
                            @*<div class="proi_box">
                                    <div class="proi_boxcttime" onclick="selection('cttime', 0)">BH 6 Tháng</div>
                                </div>
                                <div class="proi_box">
                                    <div class="proi_boxcttime" onclick="selection('cttime', 1)">BH 12 Tháng</div>
                                </div>*@
                        </li>

                    </ul>
                </div>
            </div>
            <div class="proi_pay">
                <div class="proi_payctbox">
                    @Html.Raw("<p class='proi_payct'><b>Mô tả: </b>" + Model.description + "</p><p class='proi_pcx align-content-end'>Số lượng còn: " + Model.inventory + "</p>")

                </div>
                <div class="proi_btn">
                    @if (Model.inventory != 0)
                    {
                        <a onclick="buying_stock()" class="btn btn_green proi_btnl">Mua hàng</a>
                        <div onclick="add_cart2()" class="btn btn_green proi_btnr">
                            <i class="icon_cart_proi fa-solid fa-cart-shopping"></i>
                            Thêm vào giỏ hàng
                        </div>
                    }
                    else
                    {
                        <a onclick="end_stock()" class="btn btn_green proi_btnl">Mua hàng</a>
                        <div onclick="end_stock()" class="btn btn_green proi_btnr">
                            <i class="icon_cart_proi fa-solid fa-cart-shopping"></i>
                            Thêm vào giỏ hàng
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
    <div class="info_detail">
        <div class="tdetail_title">
            Thông số kĩ thuật
        </div>
        <div class="detail_table">
            <table>
                @for (int i = 0; i < lfield.Count(); i++)
                {
                    <tr class="tr@(i%2==0?"1":"0")">
                        <td class='detail_title'>@lfield[i]</td>
                        <td class='detail_centent'>@lvalue[i]</td>
                    </tr>
                }
            </table>
        </div>
    </div>
</div>
<script>
    selection('color', 0, '@namePro/@sImage[0]');
    selection('ctram', 0);
    selection('ctor', 0);
    selection('cttime', 0);
</script>

